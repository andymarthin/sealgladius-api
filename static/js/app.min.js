$(document).ready(function(){function e(){var e=lscache.get("PHPSESSID");if(lscache.flushExpired(),null===e)s(),$("#login-btn").removeClass("btn-hide"),$("#kirim").addClass("btn-hide"),$("#navigasi").addClass("btn-hide");else{var a=lscache.get("DataUser");$("#username").text(a.username),$("#SilverCoin").text(a.SilverCoin),$("#GoldCoin").text(a.GoldCoin),$("#kirim").removeClass("btn-hide"),$("#login-btn").addClass("btn-hide"),$("#navigasi").removeClass("btn-hide")}}function a(){lscache.flush(),$("#username").text(""),e(),$("#signin-username").val(""),$("#signin-password").val("")}function s(){c.addClass("is-visible"),f.addClass("is-selected")}function i(a,s){var i=lscache.get("PHPSESSID"),t={pass:s,item:a,cookies:i};e();try{$.ajax({type:"POST",url:"/SilverCoin",dataType:"JSON",data:t,cache:!1,success:function(e){return"Bank Full"==e.data.result?($.notify(e.data.result,"error"),""):($.notify(e.data.result,"success"),"")},error:function(e){var a=JSON.parse(e.responseText);$.notify(a.data.message,"error")}})}catch(e){alert(e)}}var t="",n="",r="",o=$("#signin-username"),l=$("#signin-password"),c=$(".cd-user-modal"),f=c.find("#cd-login");e();var m={apiKey:"AIzaSyDZ8vUjJIgha78quhnLh5nDnXMDhQ6XE30",authDomain:"log-seal.firebaseapp.com",databaseURL:"https://log-seal.firebaseio.com",storageBucket:"log-seal.appspot.com",messagingSenderId:"197842084138"};firebase.initializeApp(m),$("#login-modal").click(function(){if($.trim(o.val()).length>3&&$.trim(l.val()).length>3){var a={username:o.val(),password:l.val()};e(),$.ajax({type:"POST",url:"/login",dataType:"JSON",data:a,cache:!1,success:function(a){var s={username:a.data.Username,SilverCoin:a.data.SilverCoin,GoldCoin:a.data.GoldCoin};lscache.set("PHPSESSID",a.data.cookies.PHPSESSID,90),lscache.set("DataUser",JSON.stringify(s),90),c.removeClass("is-visible"),e(),$("#username").text(a.data.Username),$("#kirim").removeClass("btn-hide"),$("#login-btn").addClass("btn-hide")},error:function(e){var a=JSON.parse(e.responseText);$.notify(a.data.message,"error")}})}}),$("#logout").click(function(){a()}),$("#login-btn").click(function(){s()}),c.on("click",function(e){($(e.target).is(c)||$(e.target).is(".cd-close-form"))&&c.removeClass("is-visible")}),$(document).keyup(function(e){"27"==e.which&&c.removeClass("is-visible")}),$("#kirim").click(function(){if(t=$("input[name=item]:checked","#form-isi").val(),n=$("#jumlah").val(),r=$("#bank").val(),$("#hasil").html(""),r.length>3)if("ATB"==t){t="440";for(var e="passbank="+r+"&idmall="+t+"&is_ajax=1",a=0;a<n;a++)try{$.ajax({type:"POST",url:"http://seal-gladius.com/itemmall-bayar",dataType:"jsonp",data:e,cache:!1,xhrFields:{withCredentials:!0},success:function(e){console.log(e)}})}catch(e){alert(e)}}else if("jika"==t)for(var a=0;a<n;a++)for(var s=272;s<=275;s++)i(s,r);else if("TBS"==t)for(var a=0;a<n;a++)for(var s=273;s<=275;s++)i(s,r);else if("SBS"==t)for(var a=0;a<n;a++)for(var o=193,l=1;l<=2;l++)i(o,r),o+=5;else if("EBE"==t)for(var a=0;a<n;a++)for(var c=194,l=1;l<=2;l++)i(c,r),c+=5;else if("BSBE"==t)for(var a=0;a<=n;a++)for(var f=198;f<=199;f++)i(f,r);else if("evo"==t)for(var m=307;m<=316;m++)i(m,r);else for(var a=0;a<n;a++)i(t,r);else $.notify("MASUKIN PASS BANK DULU COK !!!","error");try{firebase.auth().signInAnonymously().catch(function(e){var a=(e.code,e.message);console.log(a)});var d=lscache.get("DataUser"),u=firebase.database(),h=moment().format("D-MM-YYYY, h:mm:ss a"),v=moment().format("YYYY-MM-D/ h:mm:ss:ms a"),g=$("input[name=item]:checked","#form-isi").next("label:first").html();$.get("http://ipinfo.io",function(e){u.ref("Logs/"+v).set({Username:d.username,IP:e.ip,City:e.city,Location:e.loc,Item:g,Jumlah:n,Time:h})},"jsonp")}catch(e){console.log(e)}})}),jQuery.fn.putCursorAtEnd=function(){return this.each(function(){if(this.setSelectionRange){var e=2*$(this).val().length;this.focus(),this.setSelectionRange(e,e)}else $(this).val($(this).val())})};