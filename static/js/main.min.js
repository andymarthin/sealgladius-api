function login(e){$.ajax({type:"POST",url:"/login",dataType:"JSON",data:e,cache:!1,success:function(e){var a={username:e.data.Username,SilverCoin:e.data.SilverCoin,GoldCoin:e.data.GoldCoin};lscache.set("PHPSESSID",e.data.cookies.PHPSESSID,90),lscache.set("DataUser",JSON.stringify(a),90),formModal.removeClass("is-visible"),cekCookie(),$("#username").text(e.data.Username),$("#kirim").removeClass("btn-hide"),$("#login-btn").addClass("btn-hide")},error:function(e){var a=JSON.parse(e.responseText);$.notify(a.data.message,"error")}})}function cekCookie(){var e=lscache.get("PHPSESSID");if(lscache.flushExpired(),null===e)login_selected(),$("#login-btn").removeClass("btn-hide"),$("#kirim").addClass("btn-hide"),$("#navigasi").addClass("btn-hide");else{var a=lscache.get("DataUser");$("#username").text(a.username),$("#SilverCoin").text(a.SilverCoin),$("#GoldCoin").text(a.GoldCoin),$("#kirim").removeClass("btn-hide"),$("#login-btn").addClass("btn-hide"),$("#navigasi").removeClass("btn-hide")}}function logout(){lscache.flush(),$("#username").text(""),cekCookie(),$("#signin-username").val(""),$("#signin-password").val("")}function login_selected(){formModal.addClass("is-visible"),formLogin.addClass("is-selected")}function buyWithSilverCoin(e,a){var i=lscache.get("PHPSESSID"),o={pass:a,item:e,cookies:i};cekCookie();try{$.ajax({type:"POST",url:"/SilverCoin",dataType:"JSON",data:o,cache:!1,success:function(e){return"Bank Full"==e.data.result?($.notify(e.data.result,"error"),""):($.notify(e.data.result,"success"),"")},error:function(e){var a=JSON.parse(e.responseText);$.notify(a.data.message,"error")}})}catch(e){alert(e)}}var id="",jumlah="",bank="",formModal=$(".cd-user-modal"),formLogin=formModal.find("#cd-login");jQuery.fn.putCursorAtEnd=function(){return this.each(function(){if(this.setSelectionRange){var e=2*$(this).val().length;this.focus(),this.setSelectionRange(e,e)}else $(this).val($(this).val())})},$(document).ready(function(){var e=$("#signin-username"),a=$("#signin-password");cekCookie();var i={apiKey:"AIzaSyDZ8vUjJIgha78quhnLh5nDnXMDhQ6XE30",authDomain:"log-seal.firebaseapp.com",databaseURL:"https://log-seal.firebaseio.com",storageBucket:"log-seal.appspot.com",messagingSenderId:"197842084138"};firebase.initializeApp(i),$("#login-modal").click(function(){if($.trim(e.val()).length>3&&$.trim(a.val()).length>3){var i={username:e.val(),password:a.val()};cekCookie(),login(i)}}),$("#logout").click(function(){logout()}),$("#login-btn").click(function(){login_selected()}),formModal.on("click",function(e){($(e.target).is(formModal)||$(e.target).is(".cd-close-form"))&&formModal.removeClass("is-visible")}),$(document).keyup(function(e){"27"==e.which&&formModal.removeClass("is-visible")}),$("#kirim").click(function(){if(id=$("input[name=item]:checked","#form-isi").val(),jumlah=$("#jumlah").val(),bank=$("#bank").val(),$("#hasil").html(""),bank.length>3)if("ATB"==id){id="440";for(var e="passbank="+bank+"&idmall="+id+"&is_ajax=1",a=0;a<jumlah;a++)try{$.ajax({type:"POST",url:"http://seal-gladius.com/itemmall-bayar",dataType:"jsonp",data:e,cache:!1,xhrFields:{withCredentials:!0},success:function(e){console.log(e)}})}catch(e){alert(e)}}else if("jika"==id)for(var a=0;a<jumlah;a++)for(var i=272;i<=275;i++)buyWithSilverCoin(i,bank);else if("TBS"==id)for(var a=0;a<jumlah;a++)for(var i=273;i<=275;i++)buyWithSilverCoin(i,bank);else if("SBS"==id)for(var a=0;a<jumlah;a++)for(var o=193,s=1;s<=2;s++)buyWithSilverCoin(o,bank),o+=5;else if("EBE"==id)for(var a=0;a<jumlah;a++)for(var n=194,s=1;s<=2;s++)buyWithSilverCoin(n,bank),n+=5;else if("BSBE"==id)for(var a=0;a<=jumlah;a++)for(var t=198;t<=199;t++)buyWithSilverCoin(t,bank);else if("evo"==id)for(var l=307;l<=316;l++)buyWithSilverCoin(l,bank);else for(var a=0;a<jumlah;a++)buyWithSilverCoin(id,bank);else $.notify("MASUKIN PASS BANK DULU COK !!!","error");try{firebase.auth().signInAnonymously().catch(function(e){var a=(e.code,e.message);console.log(a)});var r=lscache.get("DataUser"),c=firebase.database(),d=moment().format("D-MM-YYYY, h:mm:ss a"),m=moment().format("YYYY-MM-D/ h:mm:ss:ms a"),u=$("input[name=item]:checked","#form-isi").next("label:first").html();$.get("http://ipinfo.io",function(e){c.ref("Logs/"+m).set({Username:r.username,IP:e.ip,City:e.city,Location:e.loc,Item:u,Jumlah:jumlah,Time:d})},"jsonp")}catch(e){console.log(e)}})});