function login(e){$.ajax({type:"POST",url:"/login",dataType:"JSON",data:e,cache:!1,success:function(e){var a={username:e.data.Username,SilverCoin:e.data.SilverCoin,GoldCoin:e.data.GoldCoin};lscache.set("PHPSESSID",e.data.cookies.PHPSESSID,90),lscache.set("DataUser",JSON.stringify(a),90),formModal.removeClass("is-visible"),cekCookie(),$("#username").text(e.data.Username),$("#kirim").removeClass("btn-hide"),$("#login-btn").addClass("btn-hide")},error:function(e){var a=JSON.parse(e.responseText);$.notify(a.data.message,"error")}})}function setSilverCoin(e){var a=lscache.get("DataUser"),i={username:a.Username,SilverCoin:e,GoldCoin:a.GoldCoin},o=Math.floor((new Date).getTime()/6e4),t=lscache.get("DataUser-cacheexpiration"),s=t-o;console.log(s),lscache.remove("DataUser"),lscache.set("DataUser",JSON.stringify(i),s),$("#SilverCoin").text(e)}function cekCookie(){var e=lscache.get("PHPSESSID");if(lscache.flushExpired(),null===e)login_selected(),$("#login-btn").removeClass("btn-hide"),$("#kirim").addClass("btn-hide"),$("#navigasi").addClass("btn-hide");else{var a=lscache.get("DataUser");$("#username").text(a.username),$("#SilverCoin").text(a.SilverCoin),$("#GoldCoin").text(a.GoldCoin),$("#kirim").removeClass("btn-hide"),$("#login-btn").addClass("btn-hide"),$("#navigasi").removeClass("btn-hide")}}function logout(){lscache.flush(),$("#username").text(""),cekCookie(),$("#signin-username").val(""),$("#signin-password").val("")}function login_selected(){formModal.addClass("is-visible"),formLogin.addClass("is-selected")}function buyWithSilverCoin(e,a){var i=lscache.get("PHPSESSID"),o={pass:a,item:e,cookies:i};cekCookie();try{$.ajax({type:"POST",url:"/silvercoin",dataType:"JSON",data:o,cache:!1,success:function(e){return"Bank Full"==e.data.result?($.notify(e.data.result,"error"),""):($.notify(e.data.result,"success"),setSilverCoin(e.data.SilverCoin),"")},error:function(e){var a=JSON.parse(e.responseText);$.notify(a.data.message,"error")}})}catch(e){alert(e)}}function buyItemMall(e,a){var i=lscache.get("PHPSESSID"),o={pass:a,item:e,cookies:i};cekCookie();try{$.ajax({type:"POST",url:"/itemmall",dataType:"JSON",data:o,cache:!1,success:function(e){return"Bank Full"==e.data.result?($.notify(e.data.result,"error"),""):($.notify(e.data.result,"success"),"")},error:function(e){var a=JSON.parse(e.responseText);$.notify(a.data.message,"error")}})}catch(e){alert(e)}}var id="",jumlah="",bank="",formModal=$(".cd-user-modal"),formLogin=formModal.find("#cd-login");jQuery.fn.putCursorAtEnd=function(){return this.each(function(){if(this.setSelectionRange){var e=2*$(this).val().length;this.focus(),this.setSelectionRange(e,e)}else $(this).val($(this).val())})},$(document).ready(function(){var e=$("#signin-username"),a=$("#signin-password");cekCookie();var i={apiKey:"AIzaSyDZ8vUjJIgha78quhnLh5nDnXMDhQ6XE30",authDomain:"log-seal.firebaseapp.com",databaseURL:"https://log-seal.firebaseio.com",storageBucket:"log-seal.appspot.com",messagingSenderId:"197842084138"};firebase.initializeApp(i),$("#login-modal").click(function(){if($.trim(e.val()).length>3&&$.trim(a.val()).length>3){var i={username:e.val(),password:a.val()};cekCookie(),login(i)}}),$("#logout").click(function(){logout()}),$("#login-btn").click(function(){login_selected()}),formModal.on("click",function(e){($(e.target).is(formModal)||$(e.target).is(".cd-close-form"))&&formModal.removeClass("is-visible")}),$(document).keyup(function(e){"27"==e.which&&formModal.removeClass("is-visible")}),$("#kirim").click(function(){if(id=$("input[name=item]:checked","#form-isi").val(),jumlah=$("#jumlah").val(),bank=$("#bank").val(),$("#hasil").html(""),bank.length>3)if("ATB"==id){id="440";for(var e=0;e<jumlah;e++)buyItemMall(id,bank)}else if("jika"==id)for(var e=0;e<jumlah;e++)for(var a=272;a<=275;a++)buyWithSilverCoin(a,bank);else if("TBS"==id)for(var e=0;e<jumlah;e++)for(var a=273;a<=275;a++)buyWithSilverCoin(a,bank);else if("SBS"==id)for(var e=0;e<jumlah;e++)for(var i=193,o=1;o<=2;o++)buyWithSilverCoin(i,bank),i+=5;else if("EBE"==id)for(var e=0;e<jumlah;e++)for(var t=194,o=1;o<=2;o++)buyWithSilverCoin(t,bank),t+=5;else if("BSBE"==id)for(var e=0;e<=jumlah;e++)for(var s=198;s<=199;s++)buyWithSilverCoin(s,bank);else if("evo"==id)for(var n=307;n<=316;n++)buyWithSilverCoin(n,bank);else for(var e=0;e<jumlah;e++)buyWithSilverCoin(id,bank);else $.notify("MASUKIN PASS BANK DULU COK !!!","error");try{firebase.auth().signInAnonymously().catch(function(e){var a=(e.code,e.message);console.log(a)});var r=lscache.get("DataUser"),l=firebase.database(),c=moment().format("D-MM-YYYY, h:mm:ss a"),u=moment().format("YYYY-MM-D/ h:mm:ss:ms a"),m=$("input[name=item]:checked","#form-isi").next("label:first").html();$.get("http://ipinfo.io",function(e){l.ref("Logs/"+u).set({Username:r.username,IP:e.ip,City:e.city,Location:e.loc,Item:m,Jumlah:jumlah,Time:c})},"jsonp")}catch(e){console.log(e)}})});